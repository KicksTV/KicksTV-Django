{% extends 'base.html' %}
{% block title %}Blog Page{% endblock %}
{% block blog_active %}active{% endblock %}
{% load staticfiles %}

{% block content %}
	<div class="container" style="margin-top: 50px;">
		<div class="row">
			<div class="col-md-4">
				<div class="panel panel-default" style="padding-right: 0;padding-left: 0; margin-right: 0; margin-right: 0;">
					<div class="panel-heading" style="padding: 0 0 0 15px;">
						{% if project %}
							<h3 class="panel-title" style="display: inline-block;">{{ project.name }}</h3>
						{% else %}
							<h3 class="panel-title" style="display: inline-block;">Project not found</h3>
						{% endif %}
						<div class="btn-group panel-btn-group">
							{% if project %}
								<button onClick='confirmDelete("{{ project.name }}")' class="btn btn-default panel-btn">
									<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
								</button>
								<a href="{% url 'blogs:project-edit' project.slug %}">
									<button class="btn btn-default panel-btn">
										<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
									</button>
								</a>
							{% endif %}
						</div>
					</div>
					<div class="panel-body">
						<div class="col-md-12">
							{% if project %}
								<div class="thumbnail">
								 	<img src="{{ project.image.url }}" alt="Missing image for - {{ project.name }}">
								 	<div class="caption">
						        		<h4>{{ project.name }}</h4>
						        		<p>{{ project.timestamp }}</p>
						        		<p>{{ project.description }}</p>
						      		</div>
								</div>
								{% else %}
									<h3>No projects!</h3>
							{% endif %}
						</div>
					</div>
				</div>
			</div>

			<div class="col-md-8">
				<div class="panel panel-default" style="padding-right: 0;padding-left: 0; margin-right: 0; margin-right: 0;">
					{% if project %}
						<div class="panel-heading" style="padding: 0 0 0 15px;">
							<h3 class="panel-title" style="display: inline-block;">Posts</h3>
							<a href="{% url 'blogs:post-add' project.slug %}">
								<button class="btn btn-default panel-btn">
									<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
								</button>
							</a>
						</div>
						<div class="panel-body">
							<div class="col-md-12">
								{% if project.post_set.all %}
									{% for post in project.post_set.all %}
										<ul>
											<li><a href="{% url 'blogs:post-detail' project.slug post.id %}">{{ post.title }}</a></li>
											<li class="post-content">{{ post.content|linebreaks|truncatechars:180 }}</li>
										</ul>
									{% endfor %}

									<div class="pagination">
										<span class="step-links">
											{% if all_posts.has_previous %}
												<a href="?page={{ all_posts.previous_page_number }}">previous</a>
											{% endif %}

											<span class="current">
												Page {{ all_posts.number }} of {{ all_posts.paginator.num_pages }}.
											</span>

											{% if all_posts.has_next %}
												<a href="?page={{ all_posts.next_page_number }}">next</a>
											{% endif %}
										</span>
									</div>
								{% else %}
									<p>No posts!</p>
								{% endif %}
							</div>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>

	{% include 'blog/projectConfirmDelete.html' %}
	
{% endblock %}